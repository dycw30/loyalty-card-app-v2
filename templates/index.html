<!DOCTYPE html>
<html>
<head>
    <title>Loyalty Card - Barista Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1, h2 { color: #4CAF50; }
        input, select { padding: 6px; margin: 5px 0; width: 220px; }
        button { padding: 8px 16px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background: #45a049; }
        .msg { margin-top: 15px; color: #333; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        a { display: block; margin-top: 20px; color: #555; }
    </style>
</head>
<body>
    <h1>Barista Order Dashboard</h1>

    {% if message %}
        <p class="msg">{{ message }}</p>
    {% endif %}

    <form method="post">
        <label>Unique ID:</label><br>
        <input type="text" name="unique_id" required><br>

        <label>Drink Type:</label><br>
        <select name="drink">
            {% for drink in drinks %}
                <option value="{{ drink }}">{{ drink }}</option>
            {% endfor %}
            <option value="">N/A</option>
        </select><br>

        <label>Quantity Ordered:</label><br>
        <input type="number" name="quantity" min="0" value="0"><br>

        <label>Tokens to Redeem:</label><br>
        <input type="number" name="redeem" min="0" value="0"><br><br>

        <button type="submit">Submit Order</button>
    </form>

    {% if summary %}
        <h2>Summary for ID: {{ summary.unique_id }}</h2>
        <p>Total Orders: {{ summary.total_orders }}</p>
        <p>Tokens Earned: {{ summary.tokens_earned }}</p>
        <p>Tokens Redeemed: {{ summary.redeemed }}</p>
        <p>Token Balance: {{ summary.balance }}</p>

        <h3>Recent Orders</h3>
        <table>
            <tr><th>Date</th><th>Drink</th><th>Qty</th><th>Tokens</th><th>Redeemed</th></tr>
            {% for order in recent_orders %}
                <tr>
                    <td>{{ order.date }}</td>
                    <td>{{ order.drink_type }}</td>
                    <td>{{ order.quantity }}</td>
                    <td>{{ order.tokens }}</td>
                    <td>{{ order.redeemed }}</td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    <a href="{{ url_for('logout') }}">Logout</a>
</body>
</html>
